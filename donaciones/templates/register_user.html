{% extends "base.html" %}

{% block title %}Registrar Usuario{% endblock %}

{% block content %}
  <div class="contenedor z-depth-3 white">
  	<form method="POST">
    	{% csrf_token %}
      <h4 class="center-align">Registrar Usuario</h4>
      <div class="row">
        <div class="input-field col s12">
          <i class="material-icons prefix">perm_identity</i>
          {{form_user.username}}
          {{form_user.username.label_tag}}
          {% if form_user.username.errors %}
            <span class="helper-text red-text text-accent-4" data-error="wrong" data-success="right">{{form_user.username.errors|striptags}}</span>
          {% else %}
            <span class="helper-text" data-error="wrong" data-success="right">{{form_user.username.help_text}}</span>
          {% endif %}
        </div>
          <div class="input-field col m6 s12">
            <i class="material-icons prefix">lock_outline</i>
            {{form_user.password1}}
            {{form_user.password1.label_tag}}
            {% if form_user.password1.errors %}
              <span class="helper-text red-text text-accent-4" data-error="wrong" data-success="right">{{form_user.password1.errors|striptags}}</span>
            {% else %}
              <span class="helper-text" data-error="wrong" data-success="right">{{form_user.password1.help_text}}</span>
            {% endif %}
          </div>
          <div class="input-field col m6 s12">
            <i class="material-icons prefix hide-on-med-and-up">lock_outline</i>
            {{form_user.password2}}
            {{form_user.password2.label_tag}}
            {% if form_user.password2.errors %}
              <span class="helper-text red-text text-accent-4" data-error="wrong" data-success="right">{{form_user.password2.errors|striptags}}</span>
            {% else %}
              <span class="helper-text" data-error="wrong" data-success="right">{{form_user.password2.help_text}}</span>
            {% endif %}
          </div>
        <div class="input-field col s12">
          <i class="material-icons prefix">face</i>
          {{form_user.first_name}}
          {{form_user.first_name.label_tag}}
          {% if form_user.first_name.errors %}
            <span class="helper-text red-text text-accent-4" data-error="wrong" data-success="right">{{form_user.first_name.errors|striptags}}</span>
          {% else %}
          <span class="helper-text" data-error="wrong" data-success="right">{{form_user.first_name.help_text}}</span>
          {% endif %}
        </div>
        <div class="input-field col s12">
          <i class="material-icons prefix">face</i>
          {{form_user.last_name}}
          {{form_user.last_name.label_tag}}
          {% if form_user.last_name.errors %}
            <span class="helper-text red-text text-accent-4" data-error="wrong" data-success="right">{{form_user.last_name.errors|striptags}}</span>
          {% else %}
          <span class="helper-text" data-error="wrong" data-success="right">{{form_user.last_name.help_text}}</span>
          {% endif %}
        </div>
        <div class="input-field col s12">
          <i class="material-icons prefix">phone_android</i>
          {{form_profile.phone_number}}
          {{form_profile.phone_number.label_tag}}
          {% if form_profile.phone_number.errors %}
            <span class="helper-text red-text text-accent-4" data-error="wrong" data-success="right">{{form_profile.phone_number.errors|striptags}}</span>
          {% else %}
           <span class="helper-text" data-error="wrong" data-success="right">Opcional</span>
          {% endif %}
        </div>
        <div class="col s12" style="margin-left: 7px;">
          <p>
            <label>
              <input class="filled-in" type="checkbox" name="is_staff" id="id_is_staff">
              <span>Administrador</span><br>
              <span class="helptext">Indica si el usuario sera administrador.</span>
            </label>
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col s12 m4 push-m4">
          <button class="waves-effect waves-light btn-large boton-home" type="submit">Registrar</button>
        </div>
      </div>
    </form>  
  </div>
{% endblock %}

{% block extra_js %}
  <script type="text/javascript">
    $(document).ready(function() {
      $("[name=phone_number]").attr({pattern:'[0-9]+([-\,][0-9]+)?', type:'tel', maxlength:'11'});
    });
  </script>

  <!-- AGREGA '-' AL NUMERO DE TEL-->
  <script type="text/javascript">
    $(document).ready(function() {
      $('#id_phone_number').keyup(function() {
        var val = this.value.replace(/\D/g, '');
        var newVal = '';
        if (val.length > 4) {
          newVal += val.substr(0, 4) + '-';
          val = val.substr(4);
        }
        newVal += val;
        this.value = newVal;
      });
    });
  </script>
  
{% endblock %}